<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>libpandac: Panda::ToyotaHandler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libpandac
   &#160;<span id="projectnumber">0.0.0</span>
   </div>
   <div id="projectbrief">A library designed for a comm.ai Panda.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_panda.html">Panda</a></li><li class="navelem"><a class="el" href="class_panda_1_1_toyota_handler.html">ToyotaHandler</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_panda_1_1_toyota_handler-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Panda::ToyotaHandler Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A threaded interface class that handles sending contorl commands to a <a class="el" href="namespace_panda.html" title="Handles USB communication and parsing with a comma.ai Panda. ">Panda</a> via a <a class="el" href="class_panda_1_1_handler.html" title="A class that handles the Usb, GPS, and CAN data. ">Panda::Handler</a>.  
 <a href="class_panda_1_1_toyota_handler.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="toyota_8h_source.html">toyota.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Panda::ToyotaHandler:</div>
<div class="dyncontent">
<div class="center"><img src="class_panda_1_1_toyota_handler__inherit__graph.png" border="0" usemap="#_panda_1_1_toyota_handler_inherit__map" alt="Inheritance graph"/></div>
<!-- MAP 0 -->
</div>
<div class="dynheader">
Collaboration diagram for Panda::ToyotaHandler:</div>
<div class="dyncontent">
<div class="center"><img src="class_panda_1_1_toyota_handler__coll__graph.png" border="0" usemap="#_panda_1_1_toyota_handler_coll__map" alt="Collaboration graph"/></div>
<!-- MAP 1 -->
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7328f7b42d355711c745456ea887f561"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_panda_1_1_toyota_handler.html#a7328f7b42d355711c745456ea887f561">ToyotaHandler</a> (<a class="el" href="class_panda_1_1_handler.html">Panda::Handler</a> *handler)</td></tr>
<tr class="memdesc:a7328f7b42d355711c745456ea887f561"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construction must be done with a <a class="el" href="class_panda_1_1_handler.html" title="A class that handles the Usb, GPS, and CAN data. ">Panda::Handler</a>.  <a href="#a7328f7b42d355711c745456ea887f561">More...</a><br /></td></tr>
<tr class="separator:a7328f7b42d355711c745456ea887f561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cebc60f0d286a17d8ed66e30be65587"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_panda_1_1_toyota_handler.html#a5cebc60f0d286a17d8ed66e30be65587">setHudLdaAlert</a> (bool enable)</td></tr>
<tr class="memdesc:a5cebc60f0d286a17d8ed66e30be65587"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tells the driver to grab the steering wheel.  <a href="#a5cebc60f0d286a17d8ed66e30be65587">More...</a><br /></td></tr>
<tr class="separator:a5cebc60f0d286a17d8ed66e30be65587"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47086e349ff133055e14ff7552716f86"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_panda_1_1_toyota_handler.html#a47086e349ff133055e14ff7552716f86">setHudBarrier</a> (bool enable)</td></tr>
<tr class="memdesc:a47086e349ff133055e14ff7552716f86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shows lane barriers on the HUD.  <a href="#a47086e349ff133055e14ff7552716f86">More...</a><br /></td></tr>
<tr class="separator:a47086e349ff133055e14ff7552716f86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fcc70b813b0f1d55e7c908210cf770c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_panda_1_1_toyota_handler.html#a8fcc70b813b0f1d55e7c908210cf770c">setHudLanes</a> (unsigned char laneLeft, unsigned char laneRight)</td></tr>
<tr class="memdesc:a8fcc70b813b0f1d55e7c908210cf770c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shows different lanes for the right and left side. Valid values 0-3:  <a href="#a8fcc70b813b0f1d55e7c908210cf770c">More...</a><br /></td></tr>
<tr class="separator:a8fcc70b813b0f1d55e7c908210cf770c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b1c9bf161b454c06af15a6940fab74c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_panda_1_1_toyota_handler.html#a2b1c9bf161b454c06af15a6940fab74c">setHudTwoBeeps</a> (bool enable)</td></tr>
<tr class="memdesc:a2b1c9bf161b454c06af15a6940fab74c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will cause a double-beep alert. Appears to be inconsistent in operation.  <a href="#a2b1c9bf161b454c06af15a6940fab74c">More...</a><br /></td></tr>
<tr class="separator:a2b1c9bf161b454c06af15a6940fab74c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acddf3bf4eeae89d556f90231140d93bf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_panda_1_1_toyota_handler.html#acddf3bf4eeae89d556f90231140d93bf">setHudRepeatedBeeps</a> (bool enable)</td></tr>
<tr class="memdesc:acddf3bf4eeae89d556f90231140d93bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will cause continuous beeping.  <a href="#acddf3bf4eeae89d556f90231140d93bf">More...</a><br /></td></tr>
<tr class="separator:acddf3bf4eeae89d556f90231140d93bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8b5b545c48d23281d8f5aefb543fca1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_panda_1_1_toyota_handler.html#ad8b5b545c48d23281d8f5aefb543fca1">setHudMiniCar</a> (bool enable)</td></tr>
<tr class="memdesc:ad8b5b545c48d23281d8f5aefb543fca1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Displays the "Mini Car" on the HUD.  <a href="#ad8b5b545c48d23281d8f5aefb543fca1">More...</a><br /></td></tr>
<tr class="separator:ad8b5b545c48d23281d8f5aefb543fca1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace48b0fa65b7444efeb29d6fc4d9ccd6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_panda_1_1_toyota_handler.html#ace48b0fa65b7444efeb29d6fc4d9ccd6">setHudCruiseCancelRequest</a> (bool enable)</td></tr>
<tr class="memdesc:ace48b0fa65b7444efeb29d6fc4d9ccd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invokes a cruise control cancel request, for the driver to take control over vehicle. This will disable cruise control. Commands can only be sent to the car again if the driver re-activates cruise control.  <a href="#ace48b0fa65b7444efeb29d6fc4d9ccd6">More...</a><br /></td></tr>
<tr class="separator:ace48b0fa65b7444efeb29d6fc4d9ccd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa615d3d3a4258ea9c0e6ef8dc1641ea6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_panda_1_1_toyota_handler.html#aa615d3d3a4258ea9c0e6ef8dc1641ea6">setSteerTorque</a> (int steerTorque)</td></tr>
<tr class="memdesc:aa615d3d3a4258ea9c0e6ef8dc1641ea6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a steering torque to the steering wheel (non-working).  <a href="#aa615d3d3a4258ea9c0e6ef8dc1641ea6">More...</a><br /></td></tr>
<tr class="separator:aa615d3d3a4258ea9c0e6ef8dc1641ea6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2e2b19e6b9a5fe8c0ac87240e16eca6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_panda_1_1_toyota_handler.html#aa2e2b19e6b9a5fe8c0ac87240e16eca6">setAcceleration</a> (double acceleration)</td></tr>
<tr class="memdesc:aa2e2b19e6b9a5fe8c0ac87240e16eca6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends acceleration to the cruise controller, in units of m/s^2.  <a href="#aa2e2b19e6b9a5fe8c0ac87240e16eca6">More...</a><br /></td></tr>
<tr class="separator:aa2e2b19e6b9a5fe8c0ac87240e16eca6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ce4fac988bfe3944af9ad1b93c1774a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_panda_1_1_toyota_handler.html#a2ce4fac988bfe3944af9ad1b93c1774a">getIgnitionOn</a> ()</td></tr>
<tr class="memdesc:a2ce4fac988bfe3944af9ad1b93c1774a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the <a class="el" href="namespace_panda.html" title="Handles USB communication and parsing with a comma.ai Panda. ">Panda</a> report for whether the ignition is on (line).  <a href="#a2ce4fac988bfe3944af9ad1b93c1774a">More...</a><br /></td></tr>
<tr class="separator:a2ce4fac988bfe3944af9ad1b93c1774a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a682b5112917241bcb465f6159aaf03"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_panda_1_1_toyota_handler.html#a8a682b5112917241bcb465f6159aaf03">getControlsAllowed</a> ()</td></tr>
<tr class="memdesc:a8a682b5112917241bcb465f6159aaf03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the <a class="el" href="namespace_panda.html" title="Handles USB communication and parsing with a comma.ai Panda. ">Panda</a> health report for whether controls are allowed. Controls are allowed when the cruise control is turned on and active from a SET press. This will get disabled by many events. Consider the following sequences with the corresponding return result of this function:  <a href="#a8a682b5112917241bcb465f6159aaf03">More...</a><br /></td></tr>
<tr class="separator:a8a682b5112917241bcb465f6159aaf03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64c958451d31a89274f40548e1692c7c"><td class="memItemLeft" align="right" valign="top">const PandaHealth &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_panda_1_1_toyota_handler.html#a64c958451d31a89274f40548e1692c7c">getPandaHealth</a> () const </td></tr>
<tr class="memdesc:a64c958451d31a89274f40548e1692c7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the full <a class="el" href="namespace_panda.html" title="Handles USB communication and parsing with a comma.ai Panda. ">Panda</a> Health state. controls_allowed and ignition_line can be read form this.  <a href="#a64c958451d31a89274f40548e1692c7c">More...</a><br /></td></tr>
<tr class="separator:a64c958451d31a89274f40548e1692c7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_mogi_1_1_thread"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_mogi_1_1_thread')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_mogi_1_1_thread.html">Mogi::Thread</a></td></tr>
<tr class="memitem:a24ae2960df327caca3203a1af9bb091d inherit pub_methods_class_mogi_1_1_thread"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mogi_1_1_thread.html#a24ae2960df327caca3203a1af9bb091d">start</a> ()</td></tr>
<tr class="memdesc:a24ae2960df327caca3203a1af9bb091d inherit pub_methods_class_mogi_1_1_thread"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the internal thread method.  <a href="#a24ae2960df327caca3203a1af9bb091d">More...</a><br /></td></tr>
<tr class="separator:a24ae2960df327caca3203a1af9bb091d inherit pub_methods_class_mogi_1_1_thread"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd02a33f2317add532d82e8fdbf493dd inherit pub_methods_class_mogi_1_1_thread"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mogi_1_1_thread.html#abd02a33f2317add532d82e8fdbf493dd">stop</a> ()</td></tr>
<tr class="memdesc:abd02a33f2317add532d82e8fdbf493dd inherit pub_methods_class_mogi_1_1_thread"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the internal thread method.  <a href="#abd02a33f2317add532d82e8fdbf493dd">More...</a><br /></td></tr>
<tr class="separator:abd02a33f2317add532d82e8fdbf493dd inherit pub_methods_class_mogi_1_1_thread"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd72dde3f8c326dfd8a723c99145a4c8 inherit pub_methods_class_mogi_1_1_thread"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afd72dde3f8c326dfd8a723c99145a4c8"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mogi_1_1_thread.html#afd72dde3f8c326dfd8a723c99145a4c8">WaitForInternalThreadToExit</a> ()</td></tr>
<tr class="memdesc:afd72dde3f8c326dfd8a723c99145a4c8 inherit pub_methods_class_mogi_1_1_thread"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will wait until the thread has finished. <br /></td></tr>
<tr class="separator:afd72dde3f8c326dfd8a723c99145a4c8 inherit pub_methods_class_mogi_1_1_thread"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30b698040242336857acd70e646c4ec4 inherit pub_methods_class_mogi_1_1_thread"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mogi_1_1_thread.html#a30b698040242336857acd70e646c4ec4">lock</a> ()</td></tr>
<tr class="memdesc:a30b698040242336857acd70e646c4ec4 inherit pub_methods_class_mogi_1_1_thread"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a mutual exclusion lock. Will halt if locked by another thread, and will resume when the other thread performs an unlock.  <a href="#a30b698040242336857acd70e646c4ec4">More...</a><br /></td></tr>
<tr class="separator:a30b698040242336857acd70e646c4ec4 inherit pub_methods_class_mogi_1_1_thread"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28a6ff1e1bd4185f46d43618c356a180 inherit pub_methods_class_mogi_1_1_thread"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mogi_1_1_thread.html#a28a6ff1e1bd4185f46d43618c356a180">unlock</a> ()</td></tr>
<tr class="memdesc:a28a6ff1e1bd4185f46d43618c356a180 inherit pub_methods_class_mogi_1_1_thread"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a mutual exclusion unlock. Will allow other threads that have been locked to resume.  <a href="#a28a6ff1e1bd4185f46d43618c356a180">More...</a><br /></td></tr>
<tr class="separator:a28a6ff1e1bd4185f46d43618c356a180 inherit pub_methods_class_mogi_1_1_thread"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a521b9eedee8265110d9d5b7b46a4b865 inherit pub_methods_class_mogi_1_1_thread"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mogi_1_1_thread.html#a521b9eedee8265110d9d5b7b46a4b865">pause</a> ()</td></tr>
<tr class="memdesc:a521b9eedee8265110d9d5b7b46a4b865 inherit pub_methods_class_mogi_1_1_thread"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a pause.  <a href="#a521b9eedee8265110d9d5b7b46a4b865">More...</a><br /></td></tr>
<tr class="separator:a521b9eedee8265110d9d5b7b46a4b865 inherit pub_methods_class_mogi_1_1_thread"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5019754b4b1e5cd68760a2be24d0401c inherit pub_methods_class_mogi_1_1_thread"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mogi_1_1_thread.html#a5019754b4b1e5cd68760a2be24d0401c">resume</a> ()</td></tr>
<tr class="memdesc:a5019754b4b1e5cd68760a2be24d0401c inherit pub_methods_class_mogi_1_1_thread"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resumes the thread from a pause.  <a href="#a5019754b4b1e5cd68760a2be24d0401c">More...</a><br /></td></tr>
<tr class="separator:a5019754b4b1e5cd68760a2be24d0401c inherit pub_methods_class_mogi_1_1_thread"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a474ac50cce5dadc2fe8a526c080914cf inherit pub_methods_class_mogi_1_1_thread"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mogi_1_1_thread.html#a474ac50cce5dadc2fe8a526c080914cf">running</a> ()</td></tr>
<tr class="memdesc:a474ac50cce5dadc2fe8a526c080914cf inherit pub_methods_class_mogi_1_1_thread"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the state of the thread.  <a href="#a474ac50cce5dadc2fe8a526c080914cf">More...</a><br /></td></tr>
<tr class="separator:a474ac50cce5dadc2fe8a526c080914cf inherit pub_methods_class_mogi_1_1_thread"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_methods_class_mogi_1_1_thread"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_class_mogi_1_1_thread')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="class_mogi_1_1_thread.html">Mogi::Thread</a></td></tr>
<tr class="memitem:a25403298f854e539bc840b94e81dfb0e inherit pro_methods_class_mogi_1_1_thread"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a25403298f854e539bc840b94e81dfb0e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mogi_1_1_thread.html#a25403298f854e539bc840b94e81dfb0e">checkSuspend</a> ()</td></tr>
<tr class="memdesc:a25403298f854e539bc840b94e81dfb0e inherit pro_methods_class_mogi_1_1_thread"><td class="mdescLeft">&#160;</td><td class="mdescRight">Blocks the thread from a <a class="el" href="class_mogi_1_1_thread.html#a521b9eedee8265110d9d5b7b46a4b865" title="Performs a pause. ">pause()</a> call until <a class="el" href="class_mogi_1_1_thread.html#a5019754b4b1e5cd68760a2be24d0401c" title="Resumes the thread from a pause. ">resume()</a> is called. <br /></td></tr>
<tr class="separator:a25403298f854e539bc840b94e81dfb0e inherit pro_methods_class_mogi_1_1_thread"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A threaded interface class that handles sending contorl commands to a <a class="el" href="namespace_panda.html" title="Handles USB communication and parsing with a comma.ai Panda. ">Panda</a> via a <a class="el" href="class_panda_1_1_handler.html" title="A class that handles the Usb, GPS, and CAN data. ">Panda::Handler</a>. </p>
<dl class="section user"><dt></dt><dd>This is the intended methodology for sending control commands for a toyota with TSS2.0. Tested on a RAV4 2019. </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a7328f7b42d355711c745456ea887f561"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Panda::ToyotaHandler::ToyotaHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_panda_1_1_handler.html">Panda::Handler</a> *&#160;</td>
          <td class="paramname"><em>handler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construction must be done with a <a class="el" href="class_panda_1_1_handler.html" title="A class that handles the Usb, GPS, and CAN data. ">Panda::Handler</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handler</td><td>The active interface for the <a class="el" href="namespace_panda.html" title="Handles USB communication and parsing with a comma.ai Panda. ">Panda</a>. The handler should be initialed with <a class="el" href="class_panda_1_1_handler.html#a834769cf62f6f76e59aee0c7073c26da" title="Start up USB, GPS, and decoding threads. ">Panda::Handler::initialize()</a> before Toyota::Handler::start() is called. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a8a682b5112917241bcb465f6159aaf03"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Panda::ToyotaHandler::getControlsAllowed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the <a class="el" href="namespace_panda.html" title="Handles USB communication and parsing with a comma.ai Panda. ">Panda</a> health report for whether controls are allowed. Controls are allowed when the cruise control is turned on and active from a SET press. This will get disabled by many events. Consider the following sequences with the corresponding return result of this function: </p>
<dl class="section user"><dt></dt><dd>Example sequence 1: </dd></dl>
<dl class="section user"><dt></dt><dd>0. Be Parked: 0<ol type="1">
<li>Before Cruise control enabled: 0</li>
<li>Cruise control button pushed, enabling cruise: 0</li>
<li>SET pushed while still in Park: 0</li>
<li>SET pushed after shifting to Drive with brake held: 1</li>
<li>Brake released: 1</li>
<li>Brake pushed again: 0</li>
<li>controlsAreAllowed will only return 0 unless cruise is cancelled or reset at this stage</li>
</ol>
</dd></dl>
<dl class="section user"><dt></dt><dd>Example sequence 2: </dd></dl>
<dl class="section user"><dt></dt><dd>0. Be Driving before Cruise control enabled: 0<ol type="1">
<li>Cruise control button pushed, enabling cruise: 0</li>
<li>SET pushed while moving in drive: 1</li>
<li>Brake pushed OR Throttle pushed: 0</li>
<li>SET pushed again: 0</li>
<li>Cancel pushed, then SET pushed: 1</li>
</ol>
</dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<dl class="section note"><dt>Note</dt><dd>Note: When the brake is pushed to cancel, the HUD "SET" and radar will also disappear. However when the throttle is pressed, "SET" does not disappear even though controls are no longer allowed</dd></dl>
<dl class="section user"><dt></dt><dd>This only gets updated at 1Hz from TOYOTA_RATE_HEARTBEAT </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Whether the <a class="el" href="namespace_panda.html" title="Handles USB communication and parsing with a comma.ai Panda. ">Panda</a> will allow controls to be sent to the vehicle. </dd></dl>

</div>
</div>
<a class="anchor" id="a2ce4fac988bfe3944af9ad1b93c1774a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Panda::ToyotaHandler::getIgnitionOn </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the <a class="el" href="namespace_panda.html" title="Handles USB communication and parsing with a comma.ai Panda. ">Panda</a> report for whether the ignition is on (line). </p>
<dl class="section user"><dt></dt><dd>Note: The <a class="el" href="namespace_panda.html" title="Handles USB communication and parsing with a comma.ai Panda. ">Panda</a> also reports "ignition_can but appears to always be off in the RAV4. This only gets updated at 1Hz from TOYOTA_RATE_HEARTBEAT. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Whether the ignition is turned on or off. </dd></dl>

</div>
</div>
<a class="anchor" id="a64c958451d31a89274f40548e1692c7c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const PandaHealth&amp; Panda::ToyotaHandler::getPandaHealth </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the full <a class="el" href="namespace_panda.html" title="Handles USB communication and parsing with a comma.ai Panda. ">Panda</a> Health state. controls_allowed and ignition_line can be read form this. </p>
<dl class="section return"><dt>Returns</dt><dd>The last read state of the panda's state </dd></dl>

</div>
</div>
<a class="anchor" id="aa2e2b19e6b9a5fe8c0ac87240e16eca6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Panda::ToyotaHandler::setAcceleration </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>acceleration</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends acceleration to the cruise controller, in units of m/s^2. </p>
<dl class="section user"><dt></dt><dd>The comma.ai panda code has the following limits for acceleration: </dd></dl>
<dl class="section user"><dt></dt><dd>const int TOYOTA_MAX_ACCEL = 1500; // 1.5 m/s^2 </dd></dl>
<dl class="section user"><dt></dt><dd>const int TOYOTA_MIN_ACCEL = -3000; // -3.0 m/s^2 </dd></dl>
<dl class="section user"><dt></dt><dd>The following limits can be achieved by setting the panda into "unsafe" mode: </dd></dl>
<dl class="section user"><dt></dt><dd>const int TOYOTA_ISO_MAX_ACCEL = 2000; // 2.0 m/s^2 </dd></dl>
<dl class="section user"><dt></dt><dd>const int TOYOTA_ISO_MIN_ACCEL = -3500; // -3.5 m/s^2 </dd></dl>
<dl class="section user"><dt></dt><dd>The DBC file however has a different supported range of -20:20 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">acceleration</td><td>The acceleration to be sent. Units are m/s^2, valid range is always -3.0:1.5 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a47086e349ff133055e14ff7552716f86"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Panda::ToyotaHandler::setHudBarrier </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shows lane barriers on the HUD. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">enable</td><td>Whether the barriers should be displayed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ace48b0fa65b7444efeb29d6fc4d9ccd6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Panda::ToyotaHandler::setHudCruiseCancelRequest </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Invokes a cruise control cancel request, for the driver to take control over vehicle. This will disable cruise control. Commands can only be sent to the car again if the driver re-activates cruise control. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">enable</td><td>Whether to invoke the Cancel Request </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a8fcc70b813b0f1d55e7c908210cf770c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Panda::ToyotaHandler::setHudLanes </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>laneLeft</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>laneRight</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shows different lanes for the right and left side. Valid values 0-3: </p>
<dl class="section user"><dt></dt><dd>0: Off 1: White 2: Hollow white 3: Blinking orange </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">laneLeft</td><td>The setting for the left lane </td></tr>
    <tr><td class="paramname">rightLeft</td><td>The setting for the right lane </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5cebc60f0d286a17d8ed66e30be65587"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Panda::ToyotaHandler::setHudLdaAlert </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tells the driver to grab the steering wheel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">enable</td><td>Whether the "Grab Steering Wheel" alert should be displayed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad8b5b545c48d23281d8f5aefb543fca1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Panda::ToyotaHandler::setHudMiniCar </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Displays the "Mini Car" on the HUD. </p>
<dl class="section user"><dt></dt><dd>Cruise control must be both on and active from "SET" being pushed for this to appear. If ACC is SET and not RES, (i.e. starting cruise from a standstill) then MiniCar will blink. Otherwise MiniCar is solid. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">enable</td><td>Whether the Mini Car should be displayed in the HUD. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="acddf3bf4eeae89d556f90231140d93bf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Panda::ToyotaHandler::setHudRepeatedBeeps </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Will cause continuous beeping. </p>
<dl class="section user"><dt></dt><dd></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">enable</td><td>Whether the repeated beeping should be played </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a2b1c9bf161b454c06af15a6940fab74c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Panda::ToyotaHandler::setHudTwoBeeps </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Will cause a double-beep alert. Appears to be inconsistent in operation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">enable</td><td>Whether the Two Beeps should be played </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa615d3d3a4258ea9c0e6ef8dc1641ea6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Panda::ToyotaHandler::setSteerTorque </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>steerTorque</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a steering torque to the steering wheel (non-working). </p>
<dl class="section user"><dt></dt><dd>The comma.ai panda code has the following limits for steerTorque: </dd></dl>
<dl class="section user"><dt></dt><dd>const int TOYOTA_MAX_TORQUE = 1500; // max torque cmd allowed ever </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">steerTorque</td><td>The steering torque to be sent. Valid range is -1500:1500 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/panda/<a class="el" href="toyota_8h_source.html">toyota.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Jun 3 2021 22:19:03 for libpandac by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
